# 目前开发清单（持续更新）

> 作者：刘鑫  
> 更新时间：2025-08-27

## 一、整体规划与规范
- [ ] 统一前端样式：尽量复用 `src/assets/styles/styles.css` 与 `theme.css` 的工具类，页面内样式仅保留必要覆盖，减少自定义 CSS。
- [ ] 接口返回统一封装与错误码规范：后端定义标准响应模型（code、msg、data），前端 `services/api.ts` 保持一致解析与错误提示。
- [ ] 统一日志规范：后端按模块划分日志级别与输出格式，生产环境关闭 MyBatis SQL DEBUG。
- [ ] 统一异常处理：全局异常处理器（ControllerAdvice）输出一致结构；前端 `globalErrorHandler.ts` 已配置，需对接后端错误码。
- [ ] 安全基线：JWT 过期刷新、权限注解与 URL 级鉴权、CSRF 评估（REST 通常关闭）、限流（登录/评论）。

## 二、数据库与数据模型
- [ ] 点赞/收藏第三范式改造（替代文章表的 like 字段）：
  - `likes`（id, user_id, article_id, is_like[0/1], create_time）
  - `collections`（id, user_id, article_id, is_collect[0/1], create_time）
  - 约束：唯一索引 (user_id, article_id)
  - 影响面：Mapper、Service、Controller、返回DTO、前端接口与状态联动
- [ ] 文章搜索索引：MySQL FULLTEXT（title, summary, content），或后续接入 Elasticsearch（后期）。
- [ ] 文件上传表：记录文件元数据（file_id, url, type, size, uploader, create_time），支持清理与复用。

## 三、后端待办（Spring Boot, MyBatis-Plus, Security, JWT）
- [ ] 响应体统一：定义 `CommonResult<T>`，在所有 Controller 返回；异常通过全局处理器转换。
- [ ] 认证与权限：
  - [ ] 登录成功返回 `token` 与 `expireAt`；
  - [ ] JWT 过滤器完善 401/403 响应体；
  - [ ] 基于注解的权限控制（@PreAuthorize）。
- [ ] 公告模块：补充分页、状态（发布/下线）、置顶字段。
- [ ] 文章模块：
  - [ ] 点赞/收藏 API（幂等切换）
  - [ ] 草稿/发布状态，发布时间字段
  - [ ] 标签多对多维护接口
- [ ] 文件上传：
  - [ ] 校验白名单（图片/文档）与大小限制
  - [ ] 统一上传目录，URL 前缀 `/uploads`
  - [ ] 断点续传/大文件（后期）
- [ ] 统一分页与排序参数（page, pageSize, sortField, sortOrder）
- [ ] Swagger/OpenAPI 文档增强（如 Springdoc）。

## 四、前端待办（Vue 3 + TS + Vite + Pinia + Router）
- [ ] API 基址配置化：从 `import.meta.env.VITE_API_BASE_URL` 读取，默认 `http://localhost:8080`；本地已在 `services/api.ts` 指向 8080。
- [ ] 全局错误与登录态：401 自动跳转登录，保留回跳；全局 Toast/Modal 提示（SweetAlert2）。
- [ ] 主题与样式：继续复用 `styles.css` 和 `theme.css`，减少页面内 `scoped` 复杂样式。
- [ ] 路由滚动：`router/index.ts` 已配置 `scrollBehavior`，确认前进/后退恢复位置。
- [ ] 列表组件：通用分页表格/卡片 + 加载骨架屏。
- [ ] 文章详情：点赞/收藏交互与本地态展示（已登录校验）。
- [ ] 富文本编辑：TinyMCE 图片上传适配 `/uploads`，插入回显。
- [ ] SEO 与可访问性：动态标题、描述，基础语义标签，键盘可达性。

## 五、部署与运维
- [ ] Nginx 反向代理与静态资源缓存策略上线验证。
- [ ] Docker 化：前后端与 MySQL docker-compose 一键启动；挂载日志与上传目录。
- [ ] CI/CD：GitHub Actions 构建前端，发布至服务器/对象存储；后端打包并分发。
- [ ] 监控与告警：进程探活、磁盘/CPU、应用日志异常采集。

## 六、测试计划
- [ ] 单元测试：Service 层（点赞/收藏幂等、权限控制）。
- [ ] 接口测试：登录、文章增删改查、文件上传、公告分页。
- [ ] 前端 E2E：文章发布流程、登录态过期处理、主题切换持久化。
- [ ] 性能测试：列表接口分页响应 < 300ms（P95）。

## 七、里程碑
- M1（本周）：
  - [ ] 完成点赞/收藏表与后端 API
  - [ ] 前端点赞/收藏交互 + 统一错误处理
- M2（下周）：
  - [ ] Docker 化与 Nginx 上线
  - [ ] CI/CD 初版
- M3（两周后）：
  - [ ] 搜索优化 + SEO + 监控告警

---

提示：开发中如遇异常，优先检查 `services/api.ts` 的 baseURL（默认 http://localhost:8080），以及后端端口、数据库连接与 JWT 过期时间设置。



