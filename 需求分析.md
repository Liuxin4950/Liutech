# 📋 LiuTech 需求分析文档

<div align="center">

**博客系统功能需求与实现规划**

![需求分析](https://img.shields.io/badge/需求分析-完成-success?style=flat-square)
![实现状态](https://img.shields.io/badge/实现状态-95%25-brightgreen?style=flat-square)

</div>

> **作者**：刘鑫  
> **更新时间**：2025-01-01  
> **文档版本**：v2.0  
> **项目阶段**：基本完成

---

## 🎯 项目背景
个人博客系统，支持文章发布与管理、标签与分类、用户体系、文件上传、公告展示等核心功能。目标是打造一个可持续演进、便于个人创作与分享的技术平台。

## 2. 目标与范围
- 核心目标：
  - 高效发布与管理文章（草稿/发布、富文本编辑、图片上传）
  - 完整的分类与标签体系
  - 用户认证与权限控制（JWT）
  - 评论与互动（点赞/收藏）
  - 基础搜索与统计
- 非目标（本阶段暂不实现）：多租户、复杂推荐算法、分布式存储、IM 实时通信。

## 3. 角色与使用场景
- 访客：浏览文章、搜索、查看分类/标签、阅读公告
- 注册用户：登录、点赞与收藏、个人资料管理
- 管理员：文章/分类/标签管理、公告发布、用户管理、内容审核

## 4. 功能需求

### 4.1 文章管理
- 新增/编辑/删除文章，支持草稿与发布状态
- 富文本编辑（TinyMCE），支持图片上传与插入
- 文章含：标题、摘要、封面、正文、分类、标签、多图
- 列表分页、排序（发布时间/浏览量）
- 点赞与收藏（幂等切换）

### 4.2 分类与标签
- 分类：增删改查；层级（可选，当前单层）
- 标签：增删改查；多对多关联
- 页面展示：分类页、标签页与标签详情路由

### 4.3 公告与展示
- 公告发布/下线，置顶与排序
- 前端公告栏与公告列表页

### 4.4 用户与权限
- 注册、登录、登出（JWT）
- 用户信息查看与更新
- 角色与权限（管理员/普通用户）

### 4.5 文件与资源
- 图片与附件上传（大小与类型校验），统一 URL 前缀 `/uploads`
- 文件元数据记录与清理策略

### 4.6 搜索与统计
- 关键词搜索（标题、摘要、内容），优先 MySQL FULLTEXT
- 浏览量、点赞量、收藏量统计（异步聚合可选）

## 5. 非功能性需求
- 性能：
  - 列表查询 P95 < 300ms（10k 级数据量）
  - 首页首屏可交互 < 2.5s（生产）
- 安全：
  - 密码加密存储（BCrypt）
  - 接口鉴权与权限控制（Spring Security + JWT）
  - 防刷策略：登录/评论限流、IP 黑名单（后续）
- 可靠性：
  - 异常统一处理与清晰错误码
  - 日志与审计，关键操作可追踪
- 可维护性：
  - 代码规范、统一风格与注释
  - 前端统一样式与组件化，减少重复 CSS（复用 styles.css 与 theme.css）

## 6. 接口与数据
- 统一响应模型：`{ code, msg, data }`
- 通用分页：`{ list, total, page, pageSize }`
- 认证：`Authorization: Bearer <token>`
- 主要实体：
  - Article(id, title, summary, content, cover, categoryId, status, createdAt, updatedAt)
  - Tag(id, name)
  - ArticleTag(articleId, tagId)
  - Category(id, name, parentId?)
  - Like(id, userId, articleId, isLike, createTime)
  - Collection(id, userId, articleId, isCollect, createTime)
  - Announcement(id, title, content, status, pinned, createdAt)
  - File(id, url, type, size, uploader, createTime)

## 7. 前端架构与交互
- 技术栈：Vue 3 + Vite + TypeScript + Pinia + Vue Router + Axios + TinyMCE
- 全局样式：`src/assets/styles/styles.css` 与 `theme.css`，路由滚动恢复已启用
- 交互规范：
  - 401 自动跳转登录并记录回跳地址
  - 全局错误提示与异常捕获（`globalErrorHandler.ts`）
  - 主题切换持久化（`theme.ts`）

## 8. 后端架构与设计
- Spring Boot 3 + Java 21 + MyBatis-Plus
- 分层：Controller / Service / Mapper / Domain
- 安全：JWT 认证，过滤器拦截鉴权；角色/权限注解
- 数据库：MySQL 8，统一驼峰与分页插件
- 统一异常：全局异常处理返回标准响应体

## 9. 部署与运维
- 开发：前端 http://localhost:3000/，后端 http://localhost:8080
- 生产：Nginx 托管前端 + 反向代理后端
- 环境变量：Vite 前端 `VITE_API_BASE_URL`；后端 `DB_USERNAME/DB_PASSWORD/SERVER_PORT/FILE_UPLOAD_PATH`
- Docker：可选 docker-compose 一键启动（MySQL + Backend + Frontend）

## 10. 里程碑与验收
- M1：点赞/收藏三范式、API 与前端交互打通
- M2：Docker 与 Nginx 上线、CI/CD 初版
- M3：搜索优化、SEO、监控与告警

验收标准：
- 核心流程 E2E 全通（登录、发文、查看、点赞/收藏、搜索）
- 异常与权限覆盖（401/403/404/500）
- 性能指标达标，部署文档可按步骤复现上线
